
<style>
  .m0-5 {
    margin: 0 5px;
  }
  .mr5 {
    margin-right: 5px;
  }
  tbody {
    border-top: none !important;
  }
  .td-detail, .td-detail li {
    margin: 0;
    padding: 0;
  }
  .td-detail li {
    float: left;
    list-style: none;
    margin-right: 20px;
  }
  .tr-gray {
    background-color: #f8f8f8;
    color: #333;
  }
  .table > tbody > tr > td, .table > tfoot > tr > td { vertical-align: middle;}

</style>
<section class="vbox">
  <header class="header bg-white b-b clearfix">
    <div class="m-t"></div>策略列表
  </header>
  <div class="section scrollable wrapper w-f">
      <div class="panel-body">
        <div class="m-t-sm m-b form-inline">
          <select ng-model="searchParams.code" ng-change="onSearch()" ng-options="item.code as item.value for item in eventList" class="form-control input-sm m-r">
            <option value="">全部事件</option>
          </select>
          <!--<a href="javascript:;" ng-click="addDialog()" class="btn btn-sm btn-default">-->
          <!--<i class="fa fa-plus m-r-xs"></i>添加分类</a>-->

          <a ng-click="addPolicy()" class="btn btn-sm btn-default m-r-sm" permission indata="loginAuthData" btndesc="strategy:add">新建策略</a>

          <!-- <a href="#" ui-sref="app.tactics.addTactics" class="btn btn-sm btn-default m-r-sm">基础设置,规划管理</a> -->

        </div>
        <div loading-container="tableParams.settings().$loading" class="table-responsive m-b-md" permission indata="loginAuthData" btndesc="strategy:list">
          <table ng-table="tableParams" pager-target="#ng-pagination" class="table table-striped table-hover">
            <thead>
              <tr>
                <th>应用名称</th>
                <th>策略名称</th>
                <th>标识码</th>
                <th>描述</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody ng-repeat="item in $data.recordList track by $index">
              <tr>
                <td>{{item.applicationName}}</td>
                <td>
                  <a href="#" class="text-href" ui-sref="app.management.policy.addTactics({applicationCode:item.applicationCode,eventCode:item.eventCode,desc:item.desc,identificationCode:item.identificationCode,name:item.name,riskTypeCode:item.riskTypeCode,patternCode:item.patternCode,riskThresholdList:item.riskThreshold,id:item.id})" permission indata="loginAuthData" btndesc="strategy:modify">{{item.name}}</a>
                  <!-- <a href="#" ng-if="loginAuthData.indexOf('strategy:modify1')<-1">{{item.name}}</a> -->
                </td>
                <td>{{item.identificationCode}}</td>
                <td>{{item.desc}}</td>
                <td>
                  <a href="#" class="text-href m-r" ui-sref="app.management.policy.addTactics({applicationCode:item.applicationCode,eventCode:item.eventCode,desc:item.desc,identificationCode:item.identificationCode,name:item.name,riskTypeCode:item.riskTypeCode,patternCode:item.patternCode,riskThresholdList:item.riskThreshold,id:item.id})" permission indata="loginAuthData" btndesc="strategy:modify">编辑</a>
                  <a href="javascript:;" class="text-href" ng-click="deletePolicy(item.id)" permission indata="loginAuthData" btndesc="strategy:delete">删除</a>
                </td>
              </tr>
            </tbody>
            <tbody ng-if="!tableParams.settings().$loading">
              <tr class="text-center">
                <td colspan="10" ng-if="$data.length == 0">暂无数据</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
  </div>
  <footer class="footer bg-white" fix-footer-ex="" fix-con-selector=".main-content" style="left: 200px;padding:2px 240px 0 10px;">
    <div class="row text-center-xs">
      <div class="col-md-5 hidden-sm">
        <p class="text-muted m-t">总共{{ tableParams.total() }}条 当前为第{{ tableParams.page() }}页</p>
      </div>
      <div id="ng-pagination" class="col-md-7 col-sm-12 text-right text-center-xs"></div>
    </div>
  </footer>
</section>
