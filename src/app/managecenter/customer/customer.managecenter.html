<style>
tbody {
  border-top: none !important;
}

.table>tbody>tr>td,
.table>tfoot>tr>td {
  vertical-align: middle;
}

</style>
<section class="vbox">
  <header class="header bg-white b-b clearfix">
    <div class="m-t"></div>用户管理
  </header>
  <div class="section scrollable wrapper w-f">
    <div class="panel-body">
      <div class="clearfix m-b">
        <div class="input-group pull-left m-l">
          <select ng-model="customer.bach" ng-change="bach()" ng-disabled="bachSearch" class="form-control input-sm m-r">
            <option value="" class="">批量操作</option>
            <option value="del" class="">批量删除</option>
            <option value="add" class="">批量新增应用或角色</option>
          </select>
        </div>
        <div class="m-l-sm input-group pull-left">
          <a ng-click="addCustomer()" class="btn btn-sm btn-default m-r-sm" permission indata="loginAuthData" btndesc="user:add">新建用户</a>
        </div>
        <div class="input-group pull-left" style="width:200px;">
          <input type="text" class="input-sm form-control" maxlength="50" placeholder="请输入用户名" name="usename" ng-model="searchparams.usename" />
          <span class="input-group-btn">
                  <button class="btn btn-sm btn-default" type="button" title="查询" ng-click="onSubmit()">
                    <i class="fa fa-search"></i>
                  </button>
              </span>
        </div>
      </div>
      <div loading-container="tableParams.settings().$loading" class="table-responsive m-b-md">
        <script type="text/ng-template" id="headerCheckbox.html">
          <input type="checkbox" ng-model="checkboxes.checked" class="select_all" name="filter-checkbox" value="" ng-change="selectAllChange()" />
        </script>
        <div permission indata="loginAuthData" btndesc="user:list">
          <table ng-table="tableParams" pager-target="#ng-pagination" class="table table-striped table-hover">
            <tbody ng-repeat="item in $data.recordList track by $index">
              <tr>
                <td header="'headerCheckbox.html'">
                  <input type="checkbox" ng-disabled="!item.editable" ng-model="checkboxes.items[item.id]" ng-change="selectItemChange()" />
                </td>
                <td data-title="'用户名称'">{{item.nickName}}</td>
                <td data-title="'账号'">{{item.userName}}</td>
                <td data-title="'手机号'">{{item.phone}}</td>
                <td data-title="'用户应用'" popover="{{item.applicationNamesStr}}" popover-placement="top" popover-trigger="mouseenter" popover-append-to-body="true">{{item.applicationNamesStr | showelepsis}}</td>
                <td data-title="'用户角色'" popover="{{item.roleNamesStr}}" popover-placement="top" popover-trigger="mouseenter" popover-append-to-body="true">{{item.roleNamesStr | showelepsis}}</td>
                <td data-title="'更新时间'">{{item.updateTime| date:'yyyy-MM-dd'}}</td>
                <td data-title="'操作'">
                  <a href="javascript:;" ng-show="item.editable" ng-click="editCustomer(item)" class="text-href m-r" permission indata="loginAuthData" btndesc="user:modify">编辑</a>
                  <a href="javascript:;" ng-show="item.editable" ng-click="delCustomer(item)" class="text-href m-r" permission indata="loginAuthData" btndesc="user:delete">删除</a>
                </td>
              </tr>
            </tbody>
            <tbody ng-if="!tableParams.settings().$loading">
              <tr class="text-center">
                <td colspan="10" ng-if="$data.length == 0">暂无数据</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <footer class="footer bg-white" fix-footer-ex="" fix-con-selector=".main-content" style="left: 200px;padding:2px 240px 0 10px;">
    <div class="row text-center-xs">
      <div class="col-md-5 hidden-sm">
        <p class="text-muted m-t">总共{{ tableParams.total() }}条 当前为第{{ tableParams.page() }}页</p>
      </div>
      <div id="ng-pagination" class="col-md-7 col-sm-12 text-right text-center-xs"></div>
    </div>
  </footer>
</section>
